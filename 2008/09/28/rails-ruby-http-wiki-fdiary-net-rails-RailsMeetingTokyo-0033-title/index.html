<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.19-DEV" />

  <title>Rails勉強会＠東京第33回に参加してきた． &middot; なんとなく日記</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="http://stnard.jp/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="http://stnard.jp/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="http://stnard.jp/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="http://stnard.jp/img/favicon.ico" type="image/x-icon" />

  
    <link rel="stylesheet" href="http://stnard.jp/css/custom.css">
  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="http://stnard.jp/">stnard.jp</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="http://stnard.jp/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://blog.stnard.jp"><i class='fa fa-list fa-fw'></i>Blog</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="http://stnard.jp/post/"><i class='fa fa-list fa-fw'></i>Old Posts</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/conceal_rs" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://facebook.com/rust.ogawa" target="_blank"><i class="fa fa-facebook-square fa-fw"></i>Facebook</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="http://slideshare.net/rust" target="_blank"><i class="fa fa-slideshare fa-fw"></i>SlideShare</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/shin-ichiro-ogawa-2711891b" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/rust" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2016. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Rails勉強会＠東京第33回に参加してきた．</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>2008/09/28</time>
  </div>

  

  

  

</div>


  

<p>ここ最近の9月としては結構冷え込む中，30人ぐらいが Git のために集まりました．Git すごいよ，Git．</p>

<ul>
<li>午前中は Git のお話</li>
<li>午後はそのとき決めることに</li>
</ul>

<p>##まとめと感想</p>

<ul>
<li>はてブのタグ

<ul>
<li>RailsMeetingTokyo</li>
</ul></li>
<li>ぎっとであってじっとではない．</li>
<li>いろんな使い方があるけど，やっぱ基本はあると言うことがわかった．</li>
<li>専門家(？)を呼んでの講演は非常に良かった．こういう異文化交流っていいよね．</li>
</ul>

<h1 id="分散ソースコード管理システム-git">##分散ソースコード管理システム Git</h1>

<ul>
<li>岩松さん＠Debian JP Project の中の人</li>
<li>もともと OSC Sapporo で高橋会長が依頼したようだ</li>
</ul>

<p>###はじめに</p>

<ul>
<li>Git は「じっと」じゃなくて「ぎっと」</li>
<li>使い方は人によってそれぞれ異なる</li>
<li>朝起きてまずすることは -&gt; リポジトリのチェック</li>
</ul>

<p>###Git のデータモデルや考え方</p>

<ul>
<li>4つの階層

<ul>
<li>Working Copy</li>
<li>index</li>
<li>Local Repos</li>
<li>Remote Repos</li>
</ul></li>
<li>Git のコマンド

<ul>
<li>plumbing(git-xxx)コマンド(下位 メンテナ向け)</li>
<li>porcelanin(git xxx)コマンド(上位 一般ユーザ向け)</li>
</ul></li>
<li>Git のオブジェクトファイル

<ul>
<li>4つのオブジェクト</li>
<li>commits</li>
<li>trees</li>
<li>blobls</li>
<li>tags</li>
<li>commit &gt; tree &gt; blob</li>
</ul></li>
<li>1ファイル 1 blog

<ul>
<li>zlib で圧縮</li>
<li>圧縮前の SHA1 ハッシュで管理</li>
</ul></li>
<li>1コミット毎に新たな commit オブジェクトが生成される

<ul>
<li>その生成された commit オブジェクトに HEAD が移る</li>
</ul></li>
<li>ファイルが追加される -&gt; tree オブジェクトの内容が変わる -&gt; ハッシュが変わる</li>
<li>git-cat-file

<ul>
<li>-t SHA1-Hash でそのオブジェクトが何かを見る</li>
<li>-p SHA1-Hash で内容を表示</li>
<li>commit オブジェクトだと，前の commit が parent として表示される</li>
</ul></li>
<li>tree はファイルツリー状態のオブジェクトで，commit は各 tree の前後関係を記録するオブジェクト</li>
<li>tag オブジェクトは PGP 署名時のみ作成される

<ul>
<li>tag オブジェクトは 指定した時点での commit オブジェクトに名前をつけるようなもの</li>
</ul></li>
<li>Pack ってなに？

<ul>
<li>オブジェクトを DB 化したもの</li>
<li>git gc コマンドで pack される</li>
</ul></li>
</ul>

<p>###ブランチの使い方</p>

<ul>
<li>git branch

<ul>
<li>作成・削除・リネーム</li>
</ul></li>
<li>git checkout

<ul>
<li>切替・ファイルチェックアウト</li>
</ul></li>
<li>git rebase

<ul>
<li>ブランチをリベース</li>
</ul></li>
<li>git merge

<ul>
<li>ブランチ間のマージ</li>
</ul></li>
<li>ブランチを使った例(1)

<ul>
<li>ローカルリポジトリの場合</li>
</ul></li>
</ul>

<pre><code class="language-bash">% git checkout -b test
開発
% git checkout master
% git merge test
</code></pre>

<ul>
<li>ブランチを使った例(2)

<ul>
<li>リモートリポジトリがある場合</li>
</ul></li>
</ul>

<pre><code class="language-bash">% git clone git://xxxx/
% git checkout -b devel
開発
% git checkout master
% git pull ( remote から取得 )
% git checkout devel
% git merge master ( local master からマージ -&gt; 親コミットが 2 つできる )
</code></pre>

<ul>
<li>複数の親コミットができる

<ul>
<li>開発環境によっては必要のないもの</li>
</ul></li>
<li>devel ブランチ上で git pull origin master でも OK</li>
<li>ブランチを使った例(2)

<ul>
<li>rebase を使う</li>
<li>途中まで (2) と同じ</li>
</ul></li>
</ul>

<pre><code class="language-bash">% git rebase master
</code></pre>

<ul>
<li>checkout 元を更新するイメージ

<ul>
<li>自分の commit を checkout 元のさらに上にのせるような感じ</li>
</ul></li>
<li>git pull &ndash;rebase origin master</li>
<li>開発の目的によっても違う

<ul>
<li>開発が fork -&gt;  merge 主体でも OK</li>
<li>マージ元が1つである -&gt; rebase 主体</li>
<li>ブランチ上でどう作業するかがポイント</li>
</ul></li>
<li>ブランチ作るとき

<ul>
<li>新規機能用</li>
<li>パッチ維持のために</li>
<li>パッチお試し用</li>
<li>git stash を使う場合も</li>
</ul></li>
</ul>

<p>###複数のリポジトリがある場合</p>

<ul>
<li>あるリポジトリから自分のリポジトリに pull したい！</li>
</ul>

<pre><code class="language-bash">% git pull git://XXXX/ master
</code></pre>

<ul>
<li>毎日100個のリポジトリから pull したい！</li>
<li>git remote 使いましょう</li>
</ul>

<pre><code class="language-bash">% git remote add REMOTE_NAME Repos-URL
</code></pre>

<ul>
<li>origin は pull したときに生成される REMOTE_NAME</li>
</ul>

<pre><code class="language-bash">% git clone git://XXXX/YYYY.git
% cd YYYY
% git remote add ZZZZ git://XXXX/PPPP.git
% git remote update
</code></pre>

<ul>
<li>git remote update

<ul>
<li>origin -&gt; REMOTE_NAME&hellip; とアップデート(pull)される</li>
</ul></li>
<li>リモートリポジトリをグループ化できる

<ul>
<li>git config remotes.everyday origin など</li>
</ul></li>
<li>checkout &ndash;track

<ul>
<li>リモートリポジトリのブランチをローカルブランチにする</li>
</ul></li>
</ul>

<p>###branch/remote 間のコード参照</p>

<ul>
<li>他のブランチのコードを参照するには</li>
</ul>

<pre><code class="language-bash">% git branch
* master
  testing
% git show testing:src/info.rb
</code></pre>

<ul>
<li>ログを確認する</li>
</ul>

<pre><code class="language-bash">% git log testing
% git whatchanged testing
</code></pre>

<ul>
<li>差分を見る</li>
</ul>

<pre><code class="language-bash">% git testing..master src/info.rb
</code></pre>

<ul>
<li>異なる差分を見る</li>
</ul>

<pre><code class="language-bash">% git testing...master
</code></pre>

<p>###コンフリクト時のリカバリ</p>

<ul>
<li>対策はとれるが，コンフリクトは発生する

<ul>
<li>rebase で最新コミットは常に上に持ってくる</li>
<li>独自パッチは持たない</li>
</ul></li>
<li>どうすればいいのか？

<ul>
<li>git merge 時のリカバリ</li>
<li>手動マージ -&gt; 動作確認 -&gt; add -&gt; commit</li>
<li>git rebase 時のリカバリ</li>
<li>手動マージ -&gt; add -&gt; git rebase &ndash;continue</li>
<li>git pull 時のリカバリ</li>
<li>メンテナの場合 -&gt; 一蹴</li>
<li>ユーザの場合 -&gt; 手動マージ -&gt; add -&gt; commit</li>
<li>git-am 時のリカバリ ( apply mail = メールで送られるパッチの適用 )</li>
<li>メンテナの場合 -&gt; 一蹴</li>
<li>ユーザの場合 -&gt; 手動マージ -&gt; add -&gt; git-am &ndash;resolved</li>
</ul></li>
<li>コンフリクト時のリカバリ

<ul>
<li>コンフリクトは発生する</li>
<li>発生しないようにリポジトリを管理する</li>
<li>pull 時に問題が発生しない環境作り</li>
<li>git submodule を使った機能分け</li>
<li>マージは極力避ける</li>
</ul></li>
</ul>

<p>###よく使う小ネタ集</p>

<ul>
<li>コミットログに typo が

<ul>
<li>最新のコミットに対して変更加えるオプション(&ndash;amend)</li>
</ul></li>
</ul>

<pre><code class="language-bash">% git commit --amend
</code></pre>

<ul>
<li>最新のコミットに README をコミットする</li>
</ul>

<pre><code class="language-bash">% git commit --amend README
</code></pre>

<ul>
<li>いらないファイル moge をコミットしてしまった</li>
</ul>

<pre><code class="language-bash">% git reset HEAD^ moge
</code></pre>

<ul>
<li>空ディレクトリを扱う良い方法

<ul>
<li>.gitignore ファイルを設置する</li>
</ul></li>
<li>何もいじってないのに pull でエラーになる

<ul>
<li>リモートリポジトリのコミットが入れ替わった可能性がある</li>
<li>リモートの HEAD のハッシュ値が異なる</li>
<li>追従するだけのリポジトリは remote /fetch</li>
</ul></li>
</ul>

<pre><code class="language-bash">% git fetch origin (オブジェクトを全て取得する)
% git ls-remote origin HEAD (HEAD のハッシュ値を取得)
% vim .git/refs/heads/master (HEAD のハッシュ値を書き換え)
% git checkout -f (ワーキングコピーの再構築)
</code></pre>

<pre><code>- 最新のソースコードを取得するだけの場合は fetch する
  - fetch はオブジェクトを取得するだけ
  - pull はソースコードをワーキングコピーに展開する
</code></pre>

<p>###質問コーナー</p>

<ul>
<li>特定のブランチを clone するには？

<ul>
<li>clone ではできない．</li>
<li>capistrano では :branch に &ldquo;origin/rel_1_4_0&rdquo; とか指定する．</li>
</ul></li>
</ul>

<p>##岩松さんを囲む会</p>

<ul>
<li>HTTP 経由は使わない方が良い

<ul>
<li>推奨は Git protocol</li>
<li>キャッシュの問題？</li>
</ul></li>
<li>複数人でプロジェクトを回す良い方法は

<ul>
<li>セントラルなリポジトリを持って，メンテナが管理するのが良いかもしれない</li>
</ul></li>
<li>社内で Git を使うには

<ul>
<li>git init でここに push など</li>
<li>pull するには git-daemon を立てる</li>
<li>ただし pull できるよフラグを立てる必要がある</li>
</ul></li>
<li>違うブランチの Working Copy を見たい・使いたい時

<ul>
<li>git-archive で tar -&gt; 展開テスト</li>
<li>export があればいいのになぁ</li>
</ul></li>
<li>svn で言う external は？

<ul>
<li>git submodule</li>
</ul></li>
<li>git-stash とは

<ul>
<li>編集中の内容をどこかに一時的に保存するコマンド</li>
<li>当然，コンフリクトも起こる</li>
</ul></li>
<li>git bisect

<ul>
<li>バグの２分岐検索</li>
</ul></li>
<li>git をバックエンドにした wiki

<ul>
<li>git をデータベース的に使ってみる試み</li>
</ul></li>
<li>Git 勉強会やりたい＠岩松さん</li>
</ul>

<p>##LT</p>

<ul>
<li>Ruby 1.9.0_5 を偲ぶ ＠Yuguiさん

<ul>
<li>1.9.1 PR1 <sup>10</sup>&frasl;<sub>25</sub></li>
<li>1.9.1 PR2 <sup>11</sup>&frasl;<sub>25</sub></li>
<li>1.9.1 <sup>12</sup>&frasl;<sub>20</sub></li>
<li>仕様が固まらない</li>
<li>cgi.rb</li>
<li>rdoc</li>
<li>M17N</li>
<li>miniunit

<ul>
<li>Test::Unit が削除される代わりに実装されるもの</li>
<li>Test::Unit は Gem で提供される</li>
</ul></li>
<li>default_internal</li>
<li>File -&gt; external_encoding -&gt; IO -&gt; internal_encoding -&gt; Object</li>
<li>external_encoding のデフォルト値は指定できるが，internal_encoding は？</li>
<li>そこでいろいろ問題あるらしい</li>
</ul></li>
</ul>

<p>##ふりかえりなど</p>

<ul>
<li>Keep

<ul>
<li>プラズマディスプレイは見やすい</li>
<li>CTC様++</li>
<li>招待講演はよかった．岩松さんありがとう．</li>
<li>Git++</li>
<li>Wikiを早く作った</li>
<li>IRC でヒアリングできたのが良かった</li>
</ul></li>
<li>Problem

<ul>
<li>Rails勉強会なのにRailsの話がない</li>
<li>プロジェクタｇｄｇｄ</li>
</ul></li>
<li>Try

<ul>
<li>Ruby勉強会の開催</li>
<li>初心者向けがいいかも</li>
<li>枠を設ける(月替わり etc.)</li>
<li>Rubyの話でもいいよーとアナウンスする</li>
<li>プロジェクタの説明書</li>
<li>Wiki が早すぎるとトピック小 -&gt; 歩留まり(参加率)下がる</li>
<li>最新の Web ページを rails-tokyo-latest などにしておく</li>
<li>勉強会の Wiki に IRC の情報を書く</li>
<li>Debian 方面への Ruby/Rails の出張講演とか</li>
</ul></li>
</ul>


  <div class="share-buttons">
    <div class="fb-like" data-href="http://stnard.jp/2008/09/28/rails-ruby-http-wiki-fdiary-net-rails-RailsMeetingTokyo-0033-title/" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="true"></div>
    <div class="hatena-share-button"><a href="http://b.hatena.ne.jp/entry/" class="hatena-bookmark-button" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a><script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script></div>
    <div class="twitter-share-button"><a href="https://twitter.com/share" class="twitter-share-button" data-via="conceal_rs">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></div>
</div>
<div id="fb-root"></div>
<script>(function(d, s, id) {
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) return;
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/ja_KS/sdk.js#xfbml=1&version=v2.8";
     fjs.parentNode.insertBefore(js, fjs);
 }(document, 'script', 'facebook-jssdk'));</script>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="http://stnard.jp/2008/09/26/rails-ruby-capistrano-deploy/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="http://stnard.jp/2008/09/26/rails-ruby-capistrano-deploy/">古いdeployを消すには</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="http://stnard.jp/2008/09/30/MySQL-http-www-slideshare-net-ZendCon-joinfu-the-art-of-sql-tuning-for-mysql-presentation-title/">Join-fu: The Art of SQL Tuning for MySQL の簡易まとめ</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="http://stnard.jp/2008/09/30/MySQL-http-www-slideshare-net-ZendCon-joinfu-the-art-of-sql-tuning-for-mysql-presentation-title/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  
<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'stnardsdiary';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</div>

</div>
</div>
<script src="http://stnard.jp/js/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-33462373-1', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>

