<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.19-DEV" />

  <title>Ruby会議2009 &middot; なんとなく日記</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://stnard.jp/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://stnard.jp/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://stnard.jp/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="https://stnard.jp/img/favicon.ico" type="image/x-icon" />

  
    <link rel="stylesheet" href="https://stnard.jp/css/custom.css">
  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="https://stnard.jp/">stnard.jp</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://stnard.jp/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://blog.stnard.jp"><i class='fa fa-list fa-fw'></i>Blog</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://stnard.jp/post/"><i class='fa fa-list fa-fw'></i>Old Posts</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/conceal_rs" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://facebook.com/rust.ogawa" target="_blank"><i class="fa fa-facebook-square fa-fw"></i>Facebook</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="http://slideshare.net/rust" target="_blank"><i class="fa fa-slideshare fa-fw"></i>SlideShare</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/shin-ichiro-ogawa-2711891b" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/rust" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2016. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Ruby会議2009</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>2009/07/20</time>
  </div>

  

  

  

</div>


  <p>##まとめと感想</p>

<ul>
<li>朝早いからか，部屋が分かれるからか，ちょっと少なめな感じ</li>
<li>一橋記念会議場は都合により10分遅れ

<ul>
<li>まさか来ていない？</li>
</ul></li>
<li>無線LANの繋がりにくいので，iPhone がうらやましい感じ</li>
<li>Reject会議は体調の都合により不参加．非常に残念．．．．</li>
<li>RegionalRubyKaigi会議では，高橋会長とかくたにさんの，Ruby会議への熱い思いを感じました．</li>
<li>「Ruby はフェアで」と言うのが，ここんところ周りで起こってた言語論争の答えじゃないかと思った．

<ul>
<li>Ruby を楽しんで，そして愛そう！</li>
</ul></li>
<li>1.9 への移行を急いだ方がいいな，Rails アプリの．</li>
<li>今週中にるりまのMLに参加しよう．

<ul>
<li>手伝えそうなことは何でも手伝うべきだな．Ruby 好きだし．</li>
</ul></li>
<li>コミュニティーアピールは時間切れ．漫才師の道は険しい．</li>
</ul>

<p>##Ruby 1.8 のゆくえ</p>

<ul>
<li>卜部さん @ Trans New Technology</li>
<li>2010 には Yugui さんが Commit 数 1位の予定</li>
</ul>

<p>###past</p>

<ul>
<li>1.X.0

<ul>
<li>trunk から start</li>
<li>安定したら branch を切る</li>
<li>1.8.1 から branch 化</li>
</ul></li>
<li>1.8.6

<ul>
<li>Maintainer が Kirk Haines @ Engine Yard に</li>
<li>1.8.7 が incompatible だと思われた関係で，1.8.7 を使いたくなかった人が多かった</li>
<li>「1.8.6 のメンテナンスができない＠卜部」と ruby-core に出したら，俺がやると言われた

<ul>
<li>performance が改善されるかも？それも含めて包括的にやっていく</li>
<li>MBARI patch のパッチが入るかも？</li>
<li>海洋調査ロボット用の組み込み用 Ruby 用の</li>
<li>Threads patch が入るかも</li>
<li>inline assembler で早くなるかも？</li>
</ul></li>
</ul></li>
</ul>

<p>###recent</p>

<ul>
<li>1.8.7

<ul>
<li>バグが減らない</li>
</ul></li>
</ul>

<p>###future</p>

<ul>
<li>1.8.8dev

<ul>
<li>Stable as stable API</li>
<li>No incompatible changes</li>
<li>1.8 の機能としては一応の完成としている</li>
<li>今後は 1.9 への移行が必要</li>
<li>1.8 で 1.9 のコードが parse error にならないような感じにしたい</li>
</ul></li>
<li>1.8.9 ?

<ul>
<li>1.8.9 はでない</li>
<li>1.9 を使いましょう</li>
</ul></li>
<li>Other branches

<ul>
<li>1.8.5 -&gt; Abondaned</li>
<li>1.8.6 -&gt; Maintainanced</li>
<li>1.8.7 -&gt; いつまでメンテナンスすべきか？</li>
<li>1.8.8 -&gt; まだ出てない</li>
</ul></li>
</ul>

<p>##Ruby 1.9.2 ロードマップ</p>

<ul>
<li><p>Yugui @ scaleout さん</p>

<ul>
<li>会場でリリースできればいいなぁ，と思ってたけど，emobile の関係上，リリースが間に合わなかった</li>
</ul></li>

<li><p>1.9.1</p>

<ul>
<li>p243 をあとでリリース</li>
</ul></li>

<li><p>1.9.2</p>

<ul>
<li>PR1 をあとでリリース</li>
<li>snapshot</li>
<li>お試しください</li>
</ul></li>
</ul>

<p>###Schedule</p>

<ul>
<li>1.9.2

<ul>
<li>Aug, 25 -&gt; PR2</li>
<li>Sep, 25 -&gt; RC1</li>
<li>Oct, 25 -&gt; RC2</li>
<li>Nov, 25 -&gt; RC3</li>
<li>Dec, 25 -&gt; Release</li>
</ul></li>
<li>1.9.1

<ul>
<li>Oct, ? -&gt; pXXX</li>
<li>Jan, ? -&gt; 1.9.1-final</li>
</ul></li>
</ul>

<p>###Functions</p>

<ul>
<li>Socket

<ul>
<li>ark session で</li>
</ul></li>
<li>Time

<ul>
<li>古い時刻も表現可能</li>
</ul></li>
<li>BigDecimal + Rational

<ul>
<li>互換性の向上</li>
</ul></li>
<li>BOM

<ul>
<li>open(&ldquo;file.txt&rdquo;, &ldquo;UTF-16-bom&rdquo;)</li>
<li>Byte Order を見ることができるようになる</li>
</ul></li>
<li>地味

<ul>
<li>安定していると言うこと</li>
<li>1.9 系統は stable as stable API</li>
</ul></li>
<li>1.9.2 is better 1.9.1</li>
</ul>

<p>###Issues</p>

<ul>
<li>地雷

<ul>
<li>dl</li>
<li>i386 convention しか考えてないの，Itanuim で動かないの</li>
<li>いろいろ難しい</li>
</ul></li>
<li>ripper

<ul>
<li>Ruby の parser がライブラリになりました</li>
<li>でもまだバグ有り</li>
</ul></li>
<li>tk</li>

<li><p>irb</p>

<ul>
<li>irb 立ち上げて help と打つと例外が発生する</li>
<li>近いうちに直す</li>
</ul></li>

<li><p>1.9.1 is stable as 1.8.0</p></li>

<li><p>ライブラリがまだない</p>

<ul>
<li>移植をすぐに開始してください！</li>
<li>1.8 との非互換性はない</li>
<li>ほとんど</li>
</ul></li>

<li><p>compat-version</p>

<ul>
<li>libraries の path は 1.9.1</li>
<li>1.9.1 と API 互換という意味</li>
</ul></li>

<li><p>1.9 の TEENY は Python の MINOR</p></li>

<li><p>Perl 5 -&gt; Perl 6 に比べると互換性があります！</p></li>

<li><p>incompatible libraries</p>

<ul>
<li>parse tree を使っている</li>
</ul></li>

<li><p>1.9.1 から Doxygen から Document 作れる</p>

<ul>
<li>Document 用 Patch 募集中</li>
</ul></li>

<li><p>M17N</p>

<ul>
<li>offset</li>
<li>&ldquo;あいう&rdquo;[0] -&gt; &ldquo;あ&rdquo;

<ul>
<li>昔は &ldquo;あいう&rdquo;[0] -&gt; (integer)</li>
<li>-Kn 使えば OK</li>
</ul></li>
<li>C API</li>
<li>内部 API が変わっている</li>
<li>rb_str_new ではなくて rb_usascii_str_new とか</li>
<li>Encoding をセットする必要がある</li>
<li>pg adapter

<ul>
<li>ちゃんと Encoding をつけてくれる が，まだ Patch が入っていない</li>
</ul></li>
<li>mysql / sqlite とか

<ul>
<li>ちゃんと対応してね</li>
</ul></li>
</ul></li>
</ul>

<p>###Others</p>

<ul>
<li>1.9 は使えるか？

<ul>
<li>scripting は？</li>
<li>OK</li>
<li>Rails</li>
<li>Asakusa.rb のおかげで動くが？

<ul>
<li>yugui.jp がまだ1.9 になってない</li>
</ul></li>
</ul></li>

<li><p>ruby-debugger</p>

<ul>
<li>内部構造を知らないとダメなので，難しい</li>
</ul></li>

<li><p>1.9.3 ?</p>

<ul>
<li>地味に</li>
</ul></li>
</ul>

<p>###Conclusion</p>

<ul>
<li>1.9 は？

<ul>
<li>1.8 よりいい</li>
</ul></li>
<li>1.9.2 は

<ul>
<li>Good</li>
</ul></li>
<li>移植を始めましょう</li>
</ul>

<p>##Q&amp;A of 1.8 and 1.9</p>

<ul>
<li>Debian で 1.9.0 なのは？

<ul>
<li>手違い．鋭意メンテナンス中</li>
</ul></li>
<li>UTF-8-BOM

<ul>
<li>サポートしてる．正気じゃないらしいが</li>
</ul></li>
<li>Proc の中の Const の中の Lookup が変更されたのは？

<ul>
<li>Matz がそう実装したから</li>
<li>変更したい場合はささださんへ</li>
</ul></li>
<li>1.8 で 1.9 の拡張ライブラリAPI で足りてないのがあるんだけど

<ul>
<li>入れ忘れ？</li>
<li>1.8.<sup>7</sup>&frasl;<sub>1</sub>.8.8 には入ってる</li>
</ul></li>
<li>みなさんが Ruby を変えられます</li>
</ul>

<p>p&ndash;不満は Patch に変えてください</p>

<ul>
<li>1.8 で 1.9 の新しい文法を parse できるようにするには？例えば鬼車とか？

<ul>
<li>がんばります＠卜部さん</li>
<li>動かないけど読み込めるところまでは行きたい</li>
</ul></li>
<li>1.8.6 の Performance Issue が 1.8.<sup>7</sup>&frasl;<sub>1</sub>.8.8 に入ることは？

<ul>
<li>1.8.6 だけに入れるのは大反対 by matz</li>
<li>あとで調整されるようだ</li>
</ul></li>
<li>1.9 の標準ライブラリに入れる入れないの判断は？

<ul>
<li>コミュニティの合意によるが，原則として入れない方向</li>
</ul></li>
<li>FFI は？

<ul>
<li>dl と被るので，FFI の上に dl を再実装したいが人手が足りない</li>
</ul></li>
<li>1.8.9 が出たら？

<ul>
<li>出る予定がないのでわからない</li>
</ul></li>
</ul>

<p>##Ruby リファレンスマニュアル刷新計画 2009 夏</p>

<ul>
<li>okkez(おっきー) さん</li>

<li><p>ガンダム良かった</p></li>

<li><p>第3段階継続中</p>

<ul>
<li>組み込みライブラリ，標準ライブラリのメソッドエントリを全て記述する</li>
<li>ソースコードを見て，返り値を包括的に調べて書く</li>
<li>ただ質に関しては気にしなくても，とにかく書いてあることが重要</li>
</ul></li>

<li><p>進捗</p>

<ul>
<li>まだまだある感じです</li>
<li>やる気を出した人が多いと進む</li>
</ul></li>

<li><p>現状分析</p>

<ul>
<li>新しいライブラリが追加されているので，活動の勢いが足りない</li>
</ul></li>

<li><p>企画部屋@2007/07/17)で決まったこと</p>

<ul>
<li>ライセンス</li>
<li>CC 3.0 BY</li>
<li>今後の予定</li>
<li>12月 or 1.9.2 にあわせて，何か公開</li>
<li>ruby-lang.org で公開</li>
</ul></li>

<li><p>手伝って欲しいこと</p>

<ul>
<li>すぐにできること</li>
<li>るりまの ML に参加すること</li>
<li>頑張れば出来ること</li>
<li>Redmine のるりまプロジェクトに参加すること</li>
<li>レビューアが足りない</li>
<li>文法がわかれば，マニュアルを書いて欲しい</li>
</ul></li>

<li><p>青木さん登場</p>

<ul>
<li>ごめんなさい</li>
<li>立ち上げてまったく活動できてなかったので</li>
<li>久しぶりすぎてびっくりしたこと多数</li>
<li>ふつパイラを書いてました！</li>
<li>なので，リファレンスマニュアルに復帰します！</li>
<li>1.8 だけに絞る</li>
<li>1.9 で無くなるものは対象外</li>
<li>対象ライブラリを削る</li>
<li>tk</li>
<li>socket</li>
<li>rexml</li>
<li>opensosal?</li>
<li>Kersys?</li>
</ul></li>
</ul>

<p>##Rubyist Magazine が出来るまで</p>

<ul>
<li>ささださん

<ul>
<li>30分喋っていいって言われたのに 10分しかない</li>
</ul></li>
<li>制作フロー

<ul>
<li>記事が決まると担当者がアサイン</li>
<li>記事の著者と QuickML で連絡し合っている</li>
<li>Hiki で</li>
</ul></li>
<li>詳細な編集規則がある</li>
<li>ぜひ一度ご覧ください

<ul>
<li>読みふけること間違いなし</li>
</ul></li>
<li>これから

<ul>
<li>記事の再利用</li>
<li>簡単なリリース</li>
<li>有料化や wiki の利用</li>
</ul></li>
<li>るびまの記事を書きませんか？</li>
</ul>

<p>##コミュニティーアピール</p>

<ul>
<li>けっこうぐだぐだしました．いい経験でした．</li>
</ul>

<p>##CHANGE by matz</p>

<ul>
<li>基調講演</li>
<li>国際化しました

<ul>
<li>各国の方々が集まってきました</li>
</ul></li>
<li>オバマのまねではない</li>
<li>Ruby 羅針盤

<ul>
<li>われわれがどこにいるのか？</li>
<li>2009年 日本</li>
</ul></li>
<li>コンピュータ黄金時代

<ul>
<li>Rubyが注目される時代</li>
<li>Lisp 大好き，一部を除いて</li>
</ul></li>
<li>アイデンティティ

<ul>
<li>matz の</li>
<li>「Ruby の作者」

<ul>
<li>だから顔パス</li>
</ul></li>
<li>言語オタク

<ul>
<li>Pから始まっても愛してる</li>
</ul></li>
<li>プログラム</li>
<li>文筆家

<ul>
<li>まつもとゆきひろ コードの世界</li>
</ul></li>
<li>更新しないブロガー</li>
<li>ついったー</li>
</ul></li>
<li>我々はどこを向いているのか？

<ul>
<li>アティチュード</li>
<li>感謝</li>
<li>Ruby でものづくり大賞受賞しました</li>
<li>Ruby に貢献して，使って，報告してくれた，多くの人々に</li>
</ul></li>
<li>酸っぱいブドウ

<ul>
<li>Firefox 落ちる</li>
<li>結局は好みの問題だと言った次の日に反論を言う</li>
<li>自己正当化，真実から目を背ける

<ul>
<li>Ruby はそれを推奨しません</li>
<li>Ruby には欠点があることを認める</li>
<li>変な言い訳しない</li>
</ul></li>
</ul></li>
<li>割れ窓

<ul>
<li>壊れた Windows，ではなく</li>
<li>割れ窓理論</li>
<li>割れた窓を放置すると，待ち全体がスラム化してしまう</li>
<li>逆に直すと，スラムがなくなる</li>
<li>変化しない言語は面白くない</li>
<li>できる範囲内でバグを直し続けます</li>
</ul></li>
<li>責任

<ul>
<li>鉛筆削るナイフを父親にもらって，学校に持って行った</li>
<li>ナイフは危ないけど，信頼を得て責任を感じるので，人としてしっかりする的な</li>
<li>いろんなことが出来る言語は危ない</li>
<li>いろんなことができるからこそ，使う人を信頼して責任を感じてやってもらっている</li>
</ul></li>
<li>原則

<ul>
<li>フェアである</li>
<li>自己責任</li>
<li>信頼する</li>
<li>matz がこうあって欲しい，自分がこうありたいという思い</li>
</ul></li>
<li>matz の作業環境

<ul>
<li>Emacs</li>
<li>Subversion</li>
<li>StGIT(Stacked GIT)</li>
<li>VCS on top of Git</li>
<li>Patch Stacking</li>
<li>ただ一つ欠点は，Python で書かれていること</li>
<li>未公開スタック

<ul>
<li>27スタック</li>
<li>ほとんどは実験</li>
<li>いくつか紹介</li>
</ul></li>
</ul></li>
<li>complex_literal

<ul>
<li>複素数リテラル</li>
</ul></li>
<li>true_division

<ul>
<li><sup>1</sup>&frasl;<sub>2</sub> -&gt; 有理数 <sup>1</sup>&frasl;<sub>2</sub></li>
<li><sup>2</sup>&frasl;<sub>1</sub> -&gt; 2 に正規化するには必須</li>
<li>互換性問題大</li>
</ul></li>
<li>as_conv

<ul>
<li>明示的な変換 to_a</li>
<li>暗黙的な変換 to_ary / to_hash</li>
<li>これを</li>
<li>明示的な変換 as_XXX</li>
<li>暗黙的な変換 to_XXX</li>
</ul></li>
<li>math_error_check

<ul>
<li>Math関数が例外を返す</li>
<li>NaN を返さない</li>
<li>Math 関数以外は</li>
</ul></li>
<li>o1_bitmap_marking

<ul>
<li>あとでセッションがある</li>
</ul></li>
<li>nloop

<ul>
<li>多重ループメソッド</li>
</ul></li>
</ul>

<pre><code class="language-ruby">nloop(3,3,3) {|i,j,k|
  p [i,j,k]
}
</code></pre>

<ul>
<li>str_index_offset

<ul>
<li>Bug?</li>
</ul></li>
<li>sym_gc

<ul>
<li>シンボルを回収するGC</li>
<li>シンボルはGCされないので</li>
<li>GCが遅くなる</li>
</ul></li>
<li>private_ivar

<ul>
<li>スーパークラスと共有しないインスタンス変数を導入？</li>
</ul></li>
<li>block_local_vars_eq

<ul>
<li>「:=」で代入した変数はブロックローカル</li>
</ul></li>
<li>module_as_trait

<ul>
<li>module + module</li>
<li>2つモジュールを合成した新しいモジュールを生成</li>
<li>メソッド重複でエラー</li>
<li>オーバライドがなくなるので，ソフトウェア工学的にはいい</li>
</ul></li>
<li>open_class_override

<ul>
<li>関すのオーバーライドで，前のを super で呼び出せる</li>
</ul></li>
<li>keyword_args

<ul>
<li>メソッド定義でキーワード</li>
</ul></li>
<li>lvar_propagated

<ul>
<li>ローカル変数のスコープ</li>
<li>呼ばれたときにブロックローカルであれば，勝手にスコープ更新</li>
</ul></li>
</ul>

<p>###まとめ</p>

<ul>
<li>フェアである</li>
<li>自己責任</li>
<li>信頼する</li>
<li>感謝</li>
<li>継続する</li>
</ul>

<p>###Q&amp;A</p>

<ul>
<li>Enumarator に join を入れたときにテストしなかったという話は？

<ul>
<li>手元ではテストしましたよ</li>
</ul></li>
</ul>

<p>##Lightning Talk #2</p>

<ul>
<li>RoRしか印象に残ってない．

<ul>
<li>ある意味成功なのか失敗なのか・・・・</li>
</ul></li>
</ul>

<p>##Ruby C10K: Hight Performance Networking - a case study with EM-Ruby</p>

<ul>
<li>Ilya Grigorik @igrigorik</li>
<li><a href="http://bit.ly/ruby-c10k">http://bit.ly/ruby-c10k</a></li>
<li>EM-Proxy + Examples</li>
<li>C10K</li>
<li>EventMachine</li>
<li>Benchmarks + Misc</li>
<li>Rails はスケールしないわけじゃない</li>
<li>PostRank

<ul>
<li>LoadBalancer -&gt; Nginx -&gt; AppServer</li>
</ul></li>
<li>1995-2000までは 100 req/s が限界</li>
<li>Not Application Bottleneck

<ul>
<li>-&gt; I/O + Kernel Bottleneck</li>
</ul></li>
<li>multithreads 化するために fork すれば？

<ul>
<li>Linux の fork が遅いから，fork すればいいってものじゃない</li>
</ul></li>

<li><p>non-blocking I/O の場合は non-linear に悪くなっていく</p></li>

<li><p>Eventmachine Reactor</p>

<ul>
<li>C++ core</li>
<li>API がいいらしい</li>
<li>screencast 見てみよう</li>
<li>HTTP Request で reposense が返るまで待たずに，次のコードを実行し，返ってきたらブロック内部を実行する感じ</li>
</ul></li>

<li><p>n seconds later / every n seconds / deferred / tec.</p></li>

<li><p>Stagin Enverinment Fail</p>

<ul>
<li>Production Enverinment と異なってしまう</li>
</ul></li>

<li><p>Benchmarking Proxy</p>

<ul>
<li>EM を使って Proxy にする</li>
<li>アクセスを記録して，stating などで試す仕組み</li>
<li>Ex) Port-Forwarding</li>
<li>データを変更せずにそのままログに吐くなど</li>
<li>Ex) Port-Forwarding + Alter</li>
<li>結果を変更して返す</li>
<li>Duplex HTTP for benchmarking or monitoring</li>
<li>github から clonse したら即実行できる</li>
</ul></li>

<li><p>Hacking SMTP:Whitelisting</p>

<ul>
<li>Ruby のコードで Whitelist を検証できる</li>
<li>EM-Proxy であれば，なんでも Proxy することが可能</li>
</ul></li>

<li><p>Beanstalkd + EM-proxy</p>

<ul>
<li>Beanstalkd Math</li>
<li>in memory の work queue</li>
<li>scheduling / priority</li>
<li>em-proxy を使って MySQL に書き出すようにしてみた</li>
<li>さきの queue を MySQL へ，それ以外を Beanstalkd に書き出すようにしたら，95% 以上 MySQL にいった</li>
<li>定期バッチで Beanstalkd へ書き戻し</li>
<li>2500 client で余裕があった 1core/1processor -&gt; 5000req/s</li>
<li>2cores なら C10K に対応できる</li>
</ul></li>

<li><p>普通の Web サーバなら thin がおすすめ (EM ベース)</p></li>

<li><p>2core ならどう分散させる？</p>

<ul>
<li>複数の proxy (多段 proxy)を使って振り分けるのがいいらしい？</li>
</ul></li>

<li><p>on_data はどのタイミングで呼ばれる？</p>

<ul>
<li>データがあるときに呼ばれます．socket に．</li>
<li>4kbytes + 200kbytes な request なら，最初の 4kbytes が来たときに動くから，自分で buffering しないとだめ</li>
</ul></li>

<li><p>MySQL が bottleneck にならない？</p>

<ul>
<li>MySQL をチューニングしているので大丈夫</li>
<li>trix_commit をかなりパフォーマンスよりにしている</li>
</ul></li>

<li><p>安定してるか？</p>

<ul>
<li>最初はダメだった &lt;- buffering ありだった</li>
<li>いまでは buffering なし(一部を除く) で安定稼働中</li>
</ul></li>

<li><p>多段で前方が詰まると mongrel とか thin が待ちにならないか？</p>

<ul>
<li>half-proxy / half-nginx, half-proxy / half-thin とかにすればいいけど，プロセス数が増えるからどうかなという感じ</li>
</ul></li>

<li><p>全てが state machine にならない？</p>

<ul>
<li>ならない．全ての response が必要になるわけなじゃいから，全てが state machine になることはない</li>
<li>パケットを分割して・・・・(追えなかった)</li>
</ul></li>
</ul>

<p>##Reigonal RubyKaigi 会議＠企画部屋</p>

<ul>
<li>かくたにさんが熱かった

<ul>
<li>小さくてもいいから，Regional RubyKaigi もっと頻繁にやるべきだと感じた．</li>
<li>運営大変そうですが．．．．</li>
</ul></li>
</ul>


  <div class="share-buttons">
    <div class="fb-like" data-href="https://stnard.jp/2009/07/20/rubykaigi-ruby-rails-Ruby-2009-2-2009-07-18/" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="true"></div>
    <div class="hatena-share-button"><a href="http://b.hatena.ne.jp/entry/" class="hatena-bookmark-button" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a><script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script></div>
    <div class="twitter-share-button"><a href="https://twitter.com/share" class="twitter-share-button" data-via="conceal_rs">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></div>
</div>
<div id="fb-root"></div>
<script>(function(d, s, id) {
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) return;
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/ja_KS/sdk.js#xfbml=1&version=v2.8";
     fjs.parentNode.insertBefore(js, fjs);
 }(document, 'script', 'facebook-jssdk'));</script>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://stnard.jp/2009/07/20/rubykaigi-ruby-rails-Ruby-2009-3-2009-07-19/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://stnard.jp/2009/07/20/rubykaigi-ruby-rails-Ruby-2009-3-2009-07-19/">Ruby会議2009</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="https://stnard.jp/2009/07/20/rubykaigi-ruby-rails-Ruby-2009-1-2009-07-17/">Ruby会議2009</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="https://stnard.jp/2009/07/20/rubykaigi-ruby-rails-Ruby-2009-1-2009-07-17/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  
<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'stnardsdiary';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</div>

</div>
</div>
<script src="https://stnard.jp/js/ui.js"></script>


<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-33462373-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-33462373-1');
</script>



</body>
</html>

